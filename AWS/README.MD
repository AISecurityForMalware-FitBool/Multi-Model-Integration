# Fit-Bool AI Malware Analysis System

## ğŸ“˜ Overview
**Fit-Bool**ì€ AWS ê¸°ë°˜ **AI ì•…ì„±ì½”ë“œ ë¶„ì„ ìë™í™” í”Œë«í¼**ì…ë‹ˆë‹¤.  
ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì‹¤í–‰ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³ ,  
PE, IMG, OPC, Ghidra ë“± ë‹¤ì–‘í•œ ëª¨ë¸ì„ í†µí•´ ë‹¤ì¤‘ ë¶„ì„ì„ ìˆ˜í–‰í•œ ë’¤  
ìµœì¢…ì ìœ¼ë¡œ LLM(Bedrock Claude 3 Haiku)ì„ ì´ìš©í•´  
ìì—°ì–´ í˜•íƒœì˜ ë³´ì•ˆ ë³´ê³ ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

ì´ ì €ì¥ì†ŒëŠ” **Fit-Bool ì‹œìŠ¤í…œì˜ AWS ë‚´ë¶€ êµ¬í˜„ ì†ŒìŠ¤ì½”ë“œ**ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.  
ì¦‰, ì‹¤ì œ ì„œë¹„ìŠ¤ ì¸í”„ë¼ì—ì„œ ë™ì‘í•˜ëŠ” Lambda í•¨ìˆ˜, ECS ì»¨í…Œì´ë„ˆ,  
S3 ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°, Bedrock ì—°ë™ ë¡œì§ ë“±  
**AWS ìƒì—ì„œ ë™ì‘í•˜ëŠ” ì„œë²„ë¦¬ìŠ¤ ë° ì»¨í…Œì´ë„ˆ ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ì½”ë“œ**ë¥¼ ëª¨ì•„ë‘” í´ë” êµ¬ì¡°ì…ë‹ˆë‹¤.


Fit-Boolì€ **Serverless + Container Hybrid Architecture** êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´  
Lambda, S3, ECS, SQS, Bedrock API ë“±ì„ í†µí•©í•˜ì—¬  
ëŒ€ê·œëª¨ ë³‘ë ¬ AI ë¶„ì„ í™˜ê²½ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

---
## Architecture
![alt text](image-3.png)
![alt text](image.png)
![alt text](image-1.png)
![alt text](image-2.png)
---

## Architecture Flow
```text
[Web Upload (fit-bool-web)]
      â†“
[S3: fit-bool-p] â€” file upload trigger
      â†“
[Dispatcher Lambda]
      â†“
[SQS Queues: PE / IMG / OPC]
      â†“
[Model Lambdas: PE_Lambda, IMG_Lambda, OPC_Lambda]
      â†“
[ECS Fargate â†’ Docker_AI_for_ECS Containers]
      â†“
(Optional) [Docker_Ghidra_for_ECS â€” ASM Extraction]
      â†“
[Final_Ensemble_Lambda] â€” integrate model results
      â†“
[Final_LLM_Lambda] â€” generate report via Bedrock Claude 3 Haiku
      â†“
[S3: AI_Result/Final_Report] â€” store final JSON + report
      â†“
[CloudFront + S3 Website] â€” visualize results

```
---

## Directory Structure
```text
AWS/
â”œâ”€â”€ Docker_AI_for_ECS/
â”‚   â”œâ”€â”€ PE/                      # PE feature-based AI model container
â”‚   â”œâ”€â”€ IMG/                     # Image-based CNN malware detector
â”‚   â”œâ”€â”€ OPC/                     # Opcode sequence classifier
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ Docker_Ghidra_for_ECS/
â”‚   â”œâ”€â”€ ghidra_11.4.2_PUBLIC/    # Headless Ghidra engine
â”‚   â”œâ”€â”€ scripts/                 # Automation / analysis scripts
â”‚   â”œâ”€â”€ Dockerfile               # ECS container build config
â”‚   â”œâ”€â”€ lambda_function.py       # Lambda entry for task invoke
â”‚   â””â”€â”€ run_one.sh               # Ghidra headless execution
â”‚
â”œâ”€â”€ Lambda_Function/
â”‚   â”œâ”€â”€ Dispatcher_Lambda/       # S3 trigger â†’ SQS routing
â”‚   â”œâ”€â”€ PE_Lambda/               # PE model analyzer
â”‚   â”œâ”€â”€ IMG_Lambda/              # Image model analyzer
â”‚   â”œâ”€â”€ OPC_Lambda/              # Opcode model analyzer
â”‚   â”œâ”€â”€ Final_Ensemble_Lambda/   # Ensemble integration logic
â”‚   â”œâ”€â”€ Final_LLM_Lambda/        # Bedrock LLM summary report
â”‚   â”œâ”€â”€ Timeout_Lambda/          # Timeout control logic
â”‚   â””â”€â”€ URL_Lambda/              # API Gateway endpoint (index.mjs)
â”‚
â””â”€â”€ README.md                    # (this file) overall overview
```
---

## AWS Resource Map
| Category | Service | Purpose |
|-----------|----------|----------|
| **Storage** | S3 (`fit-bool-p`, `fit-bool-web`) | File upload & result storage |
| **Compute** | Lambda + ECS (Fargate) | Analysis & automation |
| **Queue** | SQS | Model fan-out and parallel processing |
| **AI/LLM** | Bedrock Claude 3 Haiku | Report generation |
| **API** | API Gateway | Upload / Result retrieval |
| **Visualization** | CloudFront + S3 Website | Result dashboard UI |

---

## âš™ï¸ Workflow Summary
1ï¸. ì‚¬ìš©ìê°€ ì›¹ í˜ì´ì§€ë¥¼ í†µí•´ íŒŒì¼ì„ ì—…ë¡œë“œ (S3 ì €ì¥)  
2ï¸. `Dispatcher_Lambda`ê°€ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ í™•ì¥ìë³„ë¡œ SQS ì „ì†¡  
3ï¸. PE/IMG/OPC Lambda â†’ ECS ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° AI ë¶„ì„  
4ï¸. ê²°ê³¼ë¥¼ `AI_Result/` ê²½ë¡œì— ì €ì¥  
5ï¸. `Final_Ensemble_Lambda`ê°€ ê²°ê³¼ë¥¼ í†µí•©  
6ï¸. `Final_LLM_Lambda`ê°€ Bedrock APIë¡œ ìš”ì•½ ë¦¬í¬íŠ¸ ìƒì„±  
7ï¸. ìµœì¢… ê²°ê³¼ëŠ” S3ì— ì €ì¥ë˜ê³  ì›¹ì—ì„œ ì‹œê°í™”ë¨  

---

## Future Improvements
- Ghidra ASM ê²°ê³¼ ìë™ í†µí•© (Opcode pipeline)  
- EventBridge ì¬ì‹œë„ ì •ì±… ì ìš©  
- ECS ì˜¤í† ìŠ¤ì¼€ì¼ë§ ë° ë¹„ìš© ìµœì í™”  

---

## Authors
**Fit-Bool AI Security Research Team**  
- Lead Engineer: [Lee DoHyup](https://github.com/LeeDoHyup)  
- Contributors: AI Malware Analysis Team 